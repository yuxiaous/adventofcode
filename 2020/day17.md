# Day 17: Conway Cubes

> 第十七天：康威立方

As your flight slowly drifts through the sky, the Elves at the Mythical Information Bureau at the North Pole contact you. They'd like some help debugging a malfunctioning experimental energy source aboard one of their super-secret imaging satellites.

> 当你的飞机在天空中缓慢漂移时，北极神话情报局的精灵们与你取得了联系。他们希望获得一些你的帮助，调试一个发生故障的实验性能量源，它位于其中一台超级机密图像卫星上。

The experimental energy source is based on cutting-edge technology: a set of Conway Cubes contained in a pocket dimension! When you hear it's having problems, you can't help but agree to take a look.

> 实验性能量源基于最前沿的科技：一个口袋的维度可以容纳一套康威立方！当听到它出了问题时，你情不自禁地同意去看一看。

The pocket dimension contains an infinite 3-dimensional grid. At every integer 3-dimensional coordinate (`x,y,z`), there exists a single cube which is either **active** or **inactive**.

> 这个口袋维度容纳了一个无限的三维网格。在三维坐标系中的每个整数坐标（`x，y，z`）处，都存在一个活跃或是不活跃的单独立方体。

In the initial state of the pocket dimension, almost all cubes start **inactive**. The only exception to this is a small flat region of cubes ([your puzzle input](day17.txt)); the cubes in this region start in the specified **active** (`#`) or **inactive** (`.`) state.

> 在口袋维度的初始状态下，几乎所有立方体都从不活跃状态开始。这里唯一的例外是一小块平面区域的立方体（[你的谜题输入](day17.txt)），这个区域中的立方体从特定的活跃（`#`）或不活跃（`.`）状态开始。

The energy source then proceeds to boot up by executing six **cycles**.

> 然后，能量源持续执行六个周期的启动。

Each cube only ever considers its **neighbors**: any of the 26 other cubes where any of their coordinates differ by at most `1`. For example, given the cube at `x=1,y=2,z=3`, its neighbors include the cube at `x=2,y=2,z=2`, the cube at `x=0,y=2,z=3`, and so on.

> 每个立方体只需要考虑它的邻居：26 个立方体，它们之间的坐标最多相差 `1`。例如，若给定立方体坐标为 `x=1,y=2,z=3`，则它的邻居包括位于 `x=2,y=2,z=2` 的立方体，位于 `x=0,y=2,z=3` 的立方体，依此类推。

During a cycle, **all** cubes **simultaneously** change their state according to the following rules:

- If a cube is **active** and **exactly `2` or `3`** of its neighbors are also active, the cube remains **active**. Otherwise, the cube becomes **inactive**.
- If a cube is **inactive** but **exactly `3`** of its neighbors are active, the cube becomes **active**. Otherwise, the cube remains **inactive**.

> 在一个周期中，所有的立方体根据以下规则同时改变它们的状态：
>
> - 如果一个立方体处于活跃状态，并且恰好有 `2` 个或 `3` 个邻居也处于活跃状态，则该立方体保持活跃状态。否则，该立方体变为不活跃状态。
> - 如果一个立方体处于不活跃状态，但恰好有 `3` 个邻居处于活跃状态，则该立方体变为活跃状态。否则，该立方体保持不活跃状态。

The engineers responsible for this experimental energy source would like you to simulate the pocket dimension and determine what the configuration of cubes should be at the end of the six-cycle boot process.

> 负责这个实验性能量源的工程师希望你能模拟口袋维度，并确定当六个周期的启动过程结束后立方体的组态。

For example, consider the following initial state:

> 举个例子，考虑以下初始状态：

```'
.#.
..#
###
```

Even though the pocket dimension is 3-dimensional, this initial state represents a small 2-dimensional slice of it. (In particular, this initial state defines a 3x3x1 region of the 3-dimensional space.)

> 虽然口袋维度是三维的，但这个初始状态代表三维空间中的一小块二维切片。（具体一点，这个初始状态定义了三维空间中的一块 3x3x1 区域。）

Simulating a few cycles from this initial state produces the following configurations, where the result of each cycle is shown layer-by-layer at each given `z` coordinate:

> 从这个初始状态模拟几个周期后将产生以下组态，其中每个周期的结果在给定的 `z` 坐标上逐层显示：

```'
Before any cycles:

z=0
.#.
..#
###


After 1 cycle:

z=-1
#..
..#
.#.

z=0
#.#
.##
.#.

z=1
#..
..#
.#.


After 2 cycles:

z=-2
.....
.....
..#..
.....
.....

z=-1
..#..
.#..#
....#
.#...
.....

z=0
##...
##...
#....
....#
.###.

z=1
..#..
.#..#
....#
.#...
.....

z=2
.....
.....
..#..
.....
.....


After 3 cycles:

z=-2
.......
.......
..##...
..###..
.......
.......
.......

z=-1
..#....
...#...
#......
.....##
.#...#.
..#.#..
...#...

z=0
...#...
.......
#......
.......
.....##
.##.#..
...#...

z=1
..#....
...#...
#......
.....##
.#...#.
..#.#..
...#...

z=2
.......
.......
..##...
..###..
.......
.......
.......
```

After the full six-cycle boot process completes, **`112`** cubes are left in the **active** state.

> 在完整的六个周期启动过程完成后，有 **`112`** 个立方体保持活跃状态。

Starting with your given initial configuration, simulate six cycles. **How many cubes are left in the active state after the sixth cycle?**

> 从给定的初始组态开始，模拟六个周期。第六个周期后，有多少个立方体处于活跃状态？

Your puzzle answer was `362`.

## --- Part Two ---

For some reason, your simulated results don't match what the experimental energy source engineers expected. Apparently, the pocket dimension actually has **four spatial dimensions**, not three.

> 由于某种原因，你的模拟结果与实验性能量源工程师的预期不符。显然，口袋维度实际上有四个空间维度，而不是三个。

The pocket dimension contains an infinite 4-dimensional grid. At every integer 4-dimensional coordinate (`x,y,z,w`), there exists a single cube (really, a **hypercube**) which is still either **active** or **inactive**.

> 口袋维度包含一个无限的四维网格。在四维坐标系中的每个整数坐标（`x，y，z，w`）处，都存在一个活跃或是不活跃的单独立方体（实际上是一个超立方体）。

Each cube only ever considers its **neighbors**: any of the 80 other cubes where any of their coordinates differ by at most `1`. For example, given the cube at `x=1,y=2,z=3,w=4`, its neighbors include the cube at `x=2,y=2,z=3,w=3`, the cube at `x=0,y=2,z=3,w=4`, and so on.

> 每个立方体只需要考虑它的邻居：80 个立方体，它们之间的坐标最多相差 `1`。例如，若给定立方体坐标为 `x=1,y=2,z=3,w=4`，则它的邻居包括位于 `x=2,y=2,z=3,w=3` 的立方体，位于 `x=0,y=2,z=3,w=4` 的立方体，依此类推。

The initial state of the pocket dimension still consists of a small flat region of cubes. Furthermore, the same rules for cycle updating still apply: during each cycle, consider the **number of active neighbors** of each cube.

> 口袋维度的初始状态仍然由一块平坦小区域的立方体组成。此外，与之前相同的周期更新的规则仍然适用：在每个周期中，考虑每个立方体的活跃邻居数。

For example, consider the same initial state as in the example above. Even though the pocket dimension is 4-dimensional, this initial state represents a small 2-dimensional slice of it. (In particular, this initial state defines a 3x3x1x1 region of the 4-dimensional space.)

> 例如，考虑与上面例子相同的初始状态。虽然口袋维度是四维的，但这个初始状态代表四维空间中的一小块二维切片。（具体一点，这个初始状态定义了四维空间中的一块 3x3x1x1 区域。）

Simulating a few cycles from this initial state produces the following configurations, where the result of each cycle is shown layer-by-layer at each given `z` and `w` coordinate:

> 从此初始状态模拟几个周期后将产生以下组态，其中每个周期的结果在给定的 `z` 和 `w` 坐标上逐层显示：

```'
Before any cycles:

z=0, w=0
.#.
..#
###


After 1 cycle:

z=-1, w=-1
#..
..#
.#.

z=0, w=-1
#..
..#
.#.

z=1, w=-1
#..
..#
.#.

z=-1, w=0
#..
..#
.#.

z=0, w=0
#.#
.##
.#.

z=1, w=0
#..
..#
.#.

z=-1, w=1
#..
..#
.#.

z=0, w=1
#..
..#
.#.

z=1, w=1
#..
..#
.#.


After 2 cycles:

z=-2, w=-2
.....
.....
..#..
.....
.....

z=-1, w=-2
.....
.....
.....
.....
.....

z=0, w=-2
###..
##.##
#...#
.#..#
.###.

z=1, w=-2
.....
.....
.....
.....
.....

z=2, w=-2
.....
.....
..#..
.....
.....

z=-2, w=-1
.....
.....
.....
.....
.....

z=-1, w=-1
.....
.....
.....
.....
.....

z=0, w=-1
.....
.....
.....
.....
.....

z=1, w=-1
.....
.....
.....
.....
.....

z=2, w=-1
.....
.....
.....
.....
.....

z=-2, w=0
###..
##.##
#...#
.#..#
.###.

z=-1, w=0
.....
.....
.....
.....
.....

z=0, w=0
.....
.....
.....
.....
.....

z=1, w=0
.....
.....
.....
.....
.....

z=2, w=0
###..
##.##
#...#
.#..#
.###.

z=-2, w=1
.....
.....
.....
.....
.....

z=-1, w=1
.....
.....
.....
.....
.....

z=0, w=1
.....
.....
.....
.....
.....

z=1, w=1
.....
.....
.....
.....
.....

z=2, w=1
.....
.....
.....
.....
.....

z=-2, w=2
.....
.....
..#..
.....
.....

z=-1, w=2
.....
.....
.....
.....
.....

z=0, w=2
###..
##.##
#...#
.#..#
.###.

z=1, w=2
.....
.....
.....
.....
.....

z=2, w=2
.....
.....
..#..
.....
.....
```

After the full six-cycle boot process completes, **`848`** cubes are left in the **active** state.

> 在完整的六个周期启动过程完成后，有 **`848`** 个立方体保持活跃状态。

Starting with your given initial configuration, simulate six cycles in a 4-dimensional space. **How many cubes are left in the active state after the sixth cycle?**

> 从给定的初始组态开始，在四维空间中模拟六个周期。第六个周期后，有多少个立方体处于活跃状态？

Your puzzle answer was `1980`.
