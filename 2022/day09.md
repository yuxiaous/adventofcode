# Day 9: Rope Bridge

> 第9天：索桥

This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.

> 你走过一座索桥，它吱吱作响。你不确定它有多么古老，是否能承受你的体重。

It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.

> 不过，它似乎可以很好地支撑精灵们的重量。这座桥横跨峡谷，峡谷由下方的大河雕刻而成。

You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where **not** to step.

> 你小心翼翼地走着，绳索伸展着扭曲着。你决定通过模拟绳索物理特性来分散自己的注意力，也许你甚至可以弄清楚哪里**不**应该踩到。

Consider a rope with a knot at each end; these knots mark the **head** and the **tail** of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.

> 考虑一根两端都有结的绳子，这些结标记为绳索的**头**和**尾**。如果绳头距离绳尾拉得足够长，绳尾就会被绳头拉着走。

Due to nebulous reasoning involving [Planck lengths](https://en.wikipedia.org/wiki/Planck_units#Planck_length), you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical **series of motions** ([your puzzle input](day09.txt)) for the head, you can determine how the tail will move.

> 由于模糊的推理涉及到[普朗克长度](https://en.wikipedia.org/wiki/Planck_units#Planck_length)，所以你能够在二维网格上模拟绳结的位置。然后，为绳头假定**一系列运动**（[你的谜题输入](day09.txt)），你就可以确定绳尾将如何移动。

Due to the aforementioned Planck lengths, the rope must be quite short; in fact, the head (`H`) and tail (`T`) must **always be touching** (diagonally adjacent and even overlapping both count as touching):

> 由于前面提到的普朗克长度，绳索必须足够短。事实上，绳头（`H`）和绳尾（`T`）必须**始终互相接触**（对角线相邻甚至重叠都算作接触）：

```
....
.TH.
....

....
.H..
..T.
....

...
.H. (H covers T)
...
```

If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:

> 即使绳头在向上、向下、向左或向右的方向上距离绳尾只有两步的距离，绳尾也必须朝绳头的方向移动一步，以便保持足够靠近：

```
.....    .....    .....
.TH.. -> .T.H. -> ..TH.
.....    .....    .....

...    ...    ...
.T.    .T.    ...
.H. -> ... -> .T.
...    .H.    .H.
...    ...    ...
```

Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:

> 另一种情况，如果绳头和绳尾没有互相接触且不在同一行或列时，则绳尾会紧跟绳头并沿对角线移动一步：

```
.....    .....    .....
.....    ..H..    ..H..
..H.. -> ..... -> ..T..
.T...    .T...    .....
.....    .....    .....

.....    .....    .....
.....    .....    .....
..H.. -> ...H. -> ..TH.
.T...    .T...    .....
.....    .....    .....
```

You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.

> 当绳头做着一系列动作时，你只需要计算出绳尾的去向。假定绳头和绳尾都从相同的位置（重叠）开始。

For example:

> 举个例子：

```
R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
```

This series of motions moves the head **right** four steps, then **up** four steps, then **left** three steps, then **down** one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (`s` marks the starting position as a reference point):

> 这一系列动作使绳头**向右**移动四步，然后**向上**四步，然后**向左**三步，然后**向下**一步，依此类推。在每一步之后，如果这一步使得绳头不再与绳尾相邻，则需要更新绳尾的位置。在视觉上，这些运动如下（“s”标记为起始位置的参考点）：

```
== Initial State ==

......
......
......
......
H.....  (H covers T, s)

== R 4 ==

......
......
......
......
TH....  (T covers s)

......
......
......
......
sTH...

......
......
......
......
s.TH..

......
......
......
......
s..TH.

== U 4 ==

......
......
......
....H.
s..T..

......
......
....H.
....T.
s.....

......
....H.
....T.
......
s.....

....H.
....T.
......
......
s.....

== L 3 ==

...H..
....T.
......
......
s.....

..HT..
......
......
......
s.....

.HT...
......
......
......
s.....

== D 1 ==

..T...
.H....
......
......
s.....

== R 4 ==

..T...
..H...
......
......
s.....

..T...
...H..
......
......
s.....

......
...TH.
......
......
s.....

......
....TH
......
......
s.....

== D 1 ==

......
....T.
.....H
......
s.....

== L 5 ==

......
....T.
....H.
......
s.....

......
....T.
...H..
......
s.....

......
......
..HT..
......
s.....

......
......
.HT...
......
s.....

......
......
HT....
......
s.....

== R 2 ==

......
......
.H....  (H covers T)
......
s.....

......
......
.TH...
......
s.....
```

After simulating the rope, you can count up all of the positions the **tail visited at least once**. In this diagram, `s` again marks the starting position (which the tail also visited) and `#` marks other positions the tail visited:

> 在模拟绳索后，你可以统计出所有**绳尾至少经过一次**的位置。在这张图中，“s”同样标记为起始位置（绳尾也经过这个位置），“#”标记为绳尾经过的其他位置：

```
..##..
...##.
.####.
....#.
s###..
```

So, there are **`13`** positions the tail visited at least once.

> 所以，有 **`13`** 个位置绳尾经过至少一次。

Simulate your complete hypothetical series of motions. **How many positions does the tail of the rope visit at least once?**

> 模拟你完整的一系列假定动作。**有多少个位置绳尾至少至少经过了一次？**

Your puzzle answer was `6018`.
