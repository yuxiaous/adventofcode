# Day 9: Rope Bridge

> 第9天：索桥

This rope bridge creaks as you walk along it. You aren't sure how old it is, or whether it can even support your weight.

> 你走过一座索桥，它吱吱作响。你不确定它有多么古老，是否能承受你的体重。

It seems to support the Elves just fine, though. The bridge spans a gorge which was carved out by the massive river far below you.

> 不过，它似乎可以很好地支撑精灵们的重量。这座桥横跨峡谷，峡谷由下方的大河雕刻而成。

You step carefully; as you do, the ropes stretch and twist. You decide to distract yourself by modeling rope physics; maybe you can even figure out where **not** to step.

> 你小心翼翼地走着，绳索伸展着扭曲着。你决定通过模拟绳索物理特性来分散自己的注意力，也许你甚至可以弄清楚哪里**不**应该踩到。

Consider a rope with a knot at each end; these knots mark the **head** and the **tail** of the rope. If the head moves far enough away from the tail, the tail is pulled toward the head.

> 考虑一根两端都有结的绳子，这些结标记为绳索的**头**和**尾**。如果绳头距离绳尾拉得足够长，绳尾就会被绳头拉着走。

Due to nebulous reasoning involving [Planck lengths](https://en.wikipedia.org/wiki/Planck_units#Planck_length), you should be able to model the positions of the knots on a two-dimensional grid. Then, by following a hypothetical **series of motions** ([your puzzle input](day09.txt)) for the head, you can determine how the tail will move.

> 由于模糊的推理涉及到[普朗克长度](https://en.wikipedia.org/wiki/Planck_units#Planck_length)，所以你能够在二维网格上模拟绳结的位置。然后，为绳头假定**一系列运动**（[你的谜题输入](day09.txt)），你就可以确定绳尾将如何移动。

Due to the aforementioned Planck lengths, the rope must be quite short; in fact, the head (`H`) and tail (`T`) must **always be touching** (diagonally adjacent and even overlapping both count as touching):

> 由于前面提到的普朗克长度，绳索必须足够短。事实上，绳头（`H`）和绳尾（`T`）必须**始终互相接触**（对角线相邻甚至重叠都算作接触）：

```
....
.TH.
....

....
.H..
..T.
....

...
.H. (H covers T)
...
```

If the head is ever two steps directly up, down, left, or right from the tail, the tail must also move one step in that direction so it remains close enough:

> 即使绳头在向上、向下、向左或向右的方向上距离绳尾只有两步的距离，绳尾也必须朝绳头的方向移动一步，以便保持足够靠近：

```
.....    .....    .....
.TH.. -> .T.H. -> ..TH.
.....    .....    .....

...    ...    ...
.T.    .T.    ...
.H. -> ... -> .T.
...    .H.    .H.
...    ...    ...
```

Otherwise, if the head and tail aren't touching and aren't in the same row or column, the tail always moves one step diagonally to keep up:

> 另一种情况，如果绳头和绳尾没有互相接触且不在同一行或列时，则绳尾会紧跟绳头并沿对角线移动一步：

```
.....    .....    .....
.....    ..H..    ..H..
..H.. -> ..... -> ..T..
.T...    .T...    .....
.....    .....    .....

.....    .....    .....
.....    .....    .....
..H.. -> ...H. -> ..TH.
.T...    .T...    .....
.....    .....    .....
```

You just need to work out where the tail goes as the head follows a series of motions. Assume the head and the tail both start at the same position, overlapping.

> 当绳头做着一系列动作时，你只需要计算出绳尾的去向。假定绳头和绳尾都从相同的位置（重叠）开始。

For example:

> 举个例子：

```
R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
```

This series of motions moves the head **right** four steps, then **up** four steps, then **left** three steps, then **down** one step, and so on. After each step, you'll need to update the position of the tail if the step means the head is no longer adjacent to the tail. Visually, these motions occur as follows (`s` marks the starting position as a reference point):

> 这一系列动作使绳头**向右**移动四步，然后**向上**四步，然后**向左**三步，然后**向下**一步，依此类推。在每一步之后，如果这一步使得绳头不再与绳尾相邻，则需要更新绳尾的位置。在视觉上，这些运动如下（“s”标记为起始位置的参考点）：

```
== Initial State ==

......
......
......
......
H.....  (H covers T, s)

== R 4 ==

......
......
......
......
TH....  (T covers s)

......
......
......
......
sTH...

......
......
......
......
s.TH..

......
......
......
......
s..TH.

== U 4 ==

......
......
......
....H.
s..T..

......
......
....H.
....T.
s.....

......
....H.
....T.
......
s.....

....H.
....T.
......
......
s.....

== L 3 ==

...H..
....T.
......
......
s.....

..HT..
......
......
......
s.....

.HT...
......
......
......
s.....

== D 1 ==

..T...
.H....
......
......
s.....

== R 4 ==

..T...
..H...
......
......
s.....

..T...
...H..
......
......
s.....

......
...TH.
......
......
s.....

......
....TH
......
......
s.....

== D 1 ==

......
....T.
.....H
......
s.....

== L 5 ==

......
....T.
....H.
......
s.....

......
....T.
...H..
......
s.....

......
......
..HT..
......
s.....

......
......
.HT...
......
s.....

......
......
HT....
......
s.....

== R 2 ==

......
......
.H....  (H covers T)
......
s.....

......
......
.TH...
......
s.....
```

After simulating the rope, you can count up all of the positions the **tail visited at least once**. In this diagram, `s` again marks the starting position (which the tail also visited) and `#` marks other positions the tail visited:

> 在模拟绳索后，你可以统计出所有**绳尾至少经过一次**的位置。在这张图中，“s”同样标记为起始位置（绳尾也经过这个位置），“#”标记为绳尾经过的其他位置：

```
..##..
...##.
.####.
....#.
s###..
```

So, there are **`13`** positions the tail visited at least once.

> 所以，有 **`13`** 个位置绳尾经过至少一次。

Simulate your complete hypothetical series of motions. **How many positions does the tail of the rope visit at least once?**

> 模拟你完整的一系列假定动作。**有多少个位置绳尾至少至少经过了一次？**

Your puzzle answer was `6018`.

## Part Two

A rope snaps! Suddenly, the river is getting a lot closer than you remember. The bridge is still there, but some of the ropes that broke are now whipping toward you as you fall through the air!

> 一根绳子断了！突然间，你离河近了很多。桥依旧还在，但当你从空中坠落时，一些断裂的绳索向你抽打过来！

The ropes are moving too quickly to grab; you only have a few seconds to choose how to arch your body to avoid being hit. Fortunately, your simulation can be extended to support longer ropes.

> 绳索移动得太快了无法抓住，你只有几秒钟的时间来选择如何弯曲身体以避免被击中。幸运的是，你的模拟可以扩展以支持更长的绳索。

Rather than two knots, you now must simulate a rope consisting of **ten** knots. One knot is still the head of the rope and moves according to the series of motions. Each knot further down the rope follows the knot in front of it using the same rules as before.

> 你现在必须模拟由**十个**结组成的绳索，而不是两个结。一个结仍然是绳头，并根据一系列动作移动。绳索后面的每个结都按照上面相同的规则跟随着前面的结。

Using the same series of motions as the above example, but with the knots marked `H`, `1`, `2`, ..., `9`, the motions now occur as follows:

> 使用与上面的例子相同的一系列运动，将绳结标记为“H”、“1”、“2”、...、“9”，运动如下：

```
== Initial State ==

......
......
......
......
H.....  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)

== R 4 ==

......
......
......
......
1H....  (1 covers 2, 3, 4, 5, 6, 7, 8, 9, s)

......
......
......
......
21H...  (2 covers 3, 4, 5, 6, 7, 8, 9, s)

......
......
......
......
321H..  (3 covers 4, 5, 6, 7, 8, 9, s)

......
......
......
......
4321H.  (4 covers 5, 6, 7, 8, 9, s)

== U 4 ==

......
......
......
....H.
4321..  (4 covers 5, 6, 7, 8, 9, s)

......
......
....H.
.4321.
5.....  (5 covers 6, 7, 8, 9, s)

......
....H.
....1.
.432..
5.....  (5 covers 6, 7, 8, 9, s)

....H.
....1.
..432.
.5....
6.....  (6 covers 7, 8, 9, s)

== L 3 ==

...H..
....1.
..432.
.5....
6.....  (6 covers 7, 8, 9, s)

..H1..
...2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

.H1...
...2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== D 1 ==

..1...
.H.2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== R 4 ==

..1...
..H2..
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

..1...
...H..  (H covers 2)
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

......
...1H.  (1 covers 2)
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

......
...21H
..43..
.5....
6.....  (6 covers 7, 8, 9, s)

== D 1 ==

......
...21.
..43.H
.5....
6.....  (6 covers 7, 8, 9, s)

== L 5 ==

......
...21.
..43H.
.5....
6.....  (6 covers 7, 8, 9, s)

......
...21.
..4H..  (H covers 3)
.5....
6.....  (6 covers 7, 8, 9, s)

......
...2..
..H1..  (H covers 4; 1 covers 3)
.5....
6.....  (6 covers 7, 8, 9, s)

......
...2..
.H13..  (1 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

......
......
H123..  (2 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

== R 2 ==

......
......
.H23..  (H covers 1; 2 covers 4)
.5....
6.....  (6 covers 7, 8, 9, s)

......
......
.1H3..  (H covers 2, 4)
.5....
6.....  (6 covers 7, 8, 9, s)
```

Now, you need to keep track of the positions the new tail, `9`, visits. In this example, the tail never moves, and so it only visits **`1`** position. However, **be careful**: more types of motion are possible than before, so you might want to visually compare your simulated rope to the one above.

> 现在，你需要跟踪新的绳尾“9”经过的位置。在这个例子中，绳尾永远不会移动，所以它只会经过 **`1`** 个位置。但是，**注意**：与之前相比，运动情况会变得更多样，因此你可能希望将模拟的绳索与上面的绳索进行视觉上的比较。

Here's a larger example:

> 这里时一个更大的例子：

```
R 5
U 8
L 8
D 3
R 17
D 10
L 25
U 20
```

These motions occur as follows (individual steps are not shown):

> 这些动作如下（没有按照单步显示）：

```
== Initial State ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........H..............  (H covers 1, 2, 3, 4, 5, 6, 7, 8, 9, s)
..........................
..........................
..........................
..........................
..........................

== R 5 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........54321H.........  (5 covers 6, 7, 8, 9, s)
..........................
..........................
..........................
..........................
..........................

== U 8 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
................H.........
................1.........
................2.........
................3.........
...............54.........
..............6...........
.............7............
............8.............
...........9..............  (9 covers s)
..........................
..........................
..........................
..........................
..........................

== L 8 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
........H1234.............
............5.............
............6.............
............7.............
............8.............
............9.............
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== D 3 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
.........2345.............
........1...6.............
........H...7.............
............8.............
............9.............
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== R 17 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
................987654321H
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................

== D 10 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........s.........98765
.........................4
.........................3
.........................2
.........................1
.........................H

== L 25 ==

..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
H123456789................

== U 20 ==

H.........................
1.........................
2.........................
3.........................
4.........................
5.........................
6.........................
7.........................
8.........................
9.........................
..........................
..........................
..........................
..........................
..........................
...........s..............
..........................
..........................
..........................
..........................
..........................
```

Now, the tail (`9`) visits **`36`** positions (including `s`) at least once:

> 现在，绳尾 (`9`) 至少经过了 **`36`** 个位置（包括 `s`）：

```
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
..........................
#.........................
#.............###.........
#............#...#........
.#..........#.....#.......
..#..........#.....#......
...#........#.......#.....
....#......s.........#....
.....#..............#.....
......#............#......
.......#..........#.......
........#........#........
.........########.........
```

Simulate your complete series of motions on a larger rope with ten knots. **How many positions does the tail of the rope visit at least once?**

> 使用一条更长的 10 个结的绳索模拟完整的一系列运动。**有多少个位置绳尾至少至少经过了一次？**

Your puzzle answer was `2619`.
